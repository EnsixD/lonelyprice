(()=>{var e={};e.id=857,e.ids=[857],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39109:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(28282),t(11506),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),d=t(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,28282)),"/home/ensi/Projects/lonlyprice/app/dashboard/orders/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"/home/ensi/Projects/lonlyprice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ensi/Projects/lonlyprice/app/dashboard/orders/page.tsx"],m="/dashboard/orders/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/orders/page",pathname:"/dashboard/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},69281:(e,s,t)=>{Promise.resolve().then(t.bind(t,58023)),Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,30656))},28282:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(19510),a=t(19692),i=t(58585),l=t(17710),d=t(56842),n=t(57371),c=t(2946),o=t(46697),m=t(18897),x=t(39755),u=t(72298),h=t(11242),p=t(99437),g=t(34215),b=t(74888);async function f(){let e=await (0,a.e)(),{data:{user:s}}=await e.auth.getUser();s||(0,i.redirect)("/auth/login");let{data:t}=await e.from("orders").select("*").eq("user_id",s.id).order("created_at",{ascending:!1}),{data:f}=await e.from("profiles").select("is_admin").eq("id",s.id).single(),{count:v}=await e.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",s.id),A=e=>{let s={pending:{variant:"secondary",label:"Ожидает"},processing:{variant:"default",label:"Обработка"},completed:{variant:"default",label:"Завершен"},cancelled:{variant:"destructive",label:"Отменен"}};return s[e]||s.pending},j=e=>{let s={unpaid:{variant:"destructive",label:"Не оплачен"},paid:{variant:"default",label:"Оплачен"},refunded:{variant:"secondary",label:"Возврат"}};return s[e]||s.unpaid};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background to-muted/20",children:[r.jsx("div",{className:"border-b border-border/40 bg-background/80 backdrop-blur-xl sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(b.z,{user:s,cartCount:v||0,isAdmin:f?.is_admin||!1}),(0,r.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[r.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(l.default,{src:d.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),r.jsx("span",{className:"text-base sm:text-lg font-bold",children:"Lonely PRICE"})]})]}),r.jsx("div",{className:"hidden md:flex items-center gap-3",children:r.jsx(c.z,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer",children:(0,r.jsxs)(n.default,{href:"/services",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Назад к услугам"]})})}),r.jsx("div",{className:"flex md:hidden items-center gap-2",children:r.jsx(c.z,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer p-2",children:(0,r.jsxs)(n.default,{href:"/services",children:[r.jsx(x.Z,{className:"w-4 h-4"}),r.jsx("span",{className:"sr-only",children:"Назад"})]})})})]})})}),(0,r.jsxs)("div",{className:"flex-1 mx-auto w-full max-w-7xl px-4 sm:px-6 py-6 sm:py-8 lg:py-12",children:[(0,r.jsxs)("div",{className:"mb-6 sm:mb-8 flex items-center gap-3",children:[r.jsx(u.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Мои заказы"})]}),t&&t.length>0?r.jsx("div",{className:"grid gap-4 sm:gap-6",children:t.map(e=>{let s=A(e.status),t=j(e.payment_status);return(0,r.jsxs)(o.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50 hover:border-primary/30 transition-colors",children:[r.jsx(o.Ol,{className:"p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.ll,{className:"text-lg sm:text-xl mb-1",children:["Заказ #",e.id.slice(0,8)]}),(0,r.jsxs)(o.SZ,{className:"text-sm",children:["Создан"," ",(0,p.Q)(new Date(e.created_at),{addSuffix:!0,locale:g.ru})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 items-start sm:items-end",children:[r.jsx(m.C,{variant:s.variant,className:"text-xs sm:text-sm",children:s.label}),r.jsx(m.C,{variant:t.variant,className:"text-xs sm:text-sm",children:t.label})]})]})}),r.jsx(o.aY,{className:"p-4 sm:p-6 pt-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm sm:text-base text-muted-foreground",children:"Сумма заказа:"}),(0,r.jsxs)("span",{className:"text-lg sm:text-xl font-bold",children:[e.total_amount.toLocaleString("ru-RU")," ₽"]})]})}),r.jsx(o.eW,{className:"p-4 sm:p-6 pt-0",children:r.jsx(c.z,{asChild:!0,className:"w-full cursor-pointer text-sm sm:text-base",children:(0,r.jsxs)(n.default,{href:`/orders/${e.id}`,children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Открыть чат"]})})})]},e.id)})}):r.jsx(o.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:(0,r.jsxs)(o.aY,{className:"flex flex-col items-center justify-center py-8 sm:py-16",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:r.jsx(u.Z,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary"})}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 text-center",children:"У вас пока нет заказов"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-6 text-center",children:"Начните с выбора услуг"}),r.jsx(c.z,{asChild:!0,className:"cursor-pointer",children:r.jsx(n.default,{href:"/services",children:"Перейти к услугам"})})]})})]}),r.jsx("div",{className:"border-t border-border/40 mt-12 py-6",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(l.default,{src:d.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),r.jsx("span",{className:"text-sm font-medium",children:"Lonely PRICE"})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground text-center sm:text-right",children:["\xa9 ",new Date().getFullYear()," Все права защищены"]})]})})})]})}},18897:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var r=t(19510);t(71159);var a=t(43025),i=t(46145),l=t(50650);let d=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,asChild:t=!1,...i}){let n=t?a.g7:"span";return r.jsx(n,{"data-slot":"badge",className:(0,l.cn)(d({variant:s}),e),...i})}},46697:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>l,SZ:()=>n,Zb:()=>i,aY:()=>c,eW:()=>o,ll:()=>d});var r=t(19510);t(71159);var a=t(50650);function i({className:e,...s}){return r.jsx("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return r.jsx("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function d({className:e,...s}){return r.jsx("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return r.jsx("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function c({className:e,...s}){return r.jsx("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}function o({className:e,...s}){return r.jsx("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}},39755:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(27162).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},11242:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(27162).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},72298:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(27162).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},56842:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r={src:"/_next/static/media/logo.1e858ee9.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEX//v/w8PDMzMz4+Pi1tbWFhYWfn59ubm4PDw+Xl5cWOcINAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nGNgwATMTIwQBgsrCwOYycrBzsLGxMDAwMTJxMwIlYWpBlMACXYASgctBm8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},30656:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r={src:"/_next/static/media/logo.1e858ee9.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEX//v/w8PDMzMz4+Pi1tbWFhYWfn59ubm4PDw+Xl5cWOcINAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nGNgwATMTIwQBgsrCwOYycrBzsLGxMDAwMTJxMwIlYWpBlMACXYASgctBm8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,438,959,404,711,741,590,710,877,127],()=>t(39109));module.exports=r})();