(()=>{var e={};e.id=857,e.ids=[857],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39109:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(28282),s(11506),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28282)),"/home/ensi/Projects/lonlyprice/app/dashboard/orders/page.tsx"]}]},{}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/home/ensi/Projects/lonlyprice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],o=["/home/ensi/Projects/lonlyprice/app/dashboard/orders/page.tsx"],m="/dashboard/orders/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/orders/page",pathname:"/dashboard/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},69281:(e,t,s)=>{Promise.resolve().then(s.bind(s,58023)),Promise.resolve().then(s.t.bind(s,92481,23)),Promise.resolve().then(s.t.bind(s,79404,23)),Promise.resolve().then(s.bind(s,30656))},28282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(19510),a=s(19692),i=s(58585),n=s(17710),l=s(56842),d=s(57371),c=s(2946),o=s(46697),m=s(18897),x=s(39755),u=s(72298),p=s(11242),h=s(99437),g=s(34215),b=s(74888);async function v(){let e=await (0,a.e)(),{data:{user:t}}=await e.auth.getUser();t||(0,i.redirect)("/auth/login");let{data:s}=await e.from("orders").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),{data:v}=await e.from("profiles").select("is_admin").eq("id",t.id).single(),{count:f}=await e.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",t.id),A=e=>{let t={pending:{variant:"secondary",label:"Ожидает"},processing:{variant:"default",label:"Обработка"},completed:{variant:"default",label:"Завершен"},cancelled:{variant:"destructive",label:"Отменен"}};return t[e]||t.pending},j=e=>{let t={unpaid:{variant:"destructive",label:"Не оплачен"},paid:{variant:"default",label:"Оплачен"},refunded:{variant:"secondary",label:"Возврат"}};return t[e]||t.unpaid};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background to-muted/20",children:[r.jsx("div",{className:"border-b border-border/40 bg-background/80 backdrop-blur-xl sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(b.z,{user:t,cartCount:f||0,isAdmin:v?.is_admin||!1}),(0,r.jsxs)(d.default,{href:"/",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[r.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(n.default,{src:l.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),r.jsx("span",{className:"text-base sm:text-lg font-bold",children:"Lonely PRICE"})]})]}),r.jsx("div",{className:"hidden md:flex items-center gap-3",children:r.jsx(c.z,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer",children:(0,r.jsxs)(d.default,{href:"/services",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Назад к услугам"]})})}),r.jsx("div",{className:"flex md:hidden items-center gap-2",children:r.jsx(c.z,{asChild:!0,variant:"ghost",size:"sm",className:"cursor-pointer p-2",children:(0,r.jsxs)(d.default,{href:"/services",children:[r.jsx(x.Z,{className:"w-4 h-4"}),r.jsx("span",{className:"sr-only",children:"Назад"})]})})})]})})}),(0,r.jsxs)("div",{className:"flex-1 mx-auto w-full max-w-7xl px-4 sm:px-6 py-6 sm:py-8 lg:py-12",children:[(0,r.jsxs)("div",{className:"mb-6 sm:mb-8 flex items-center gap-3",children:[r.jsx(u.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Мои заказы"})]}),s&&s.length>0?r.jsx("div",{className:"grid gap-4 sm:gap-6",children:s.map(e=>{let t=A(e.status),s=j(e.payment_status);return(0,r.jsxs)(o.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50 hover:border-primary/30 transition-colors",children:[r.jsx(o.Ol,{className:"p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.ll,{className:"text-lg sm:text-xl mb-1",children:["Заказ #",e.id.slice(0,8)]}),(0,r.jsxs)(o.SZ,{className:"text-sm",children:["Создан"," ",(0,h.Q)(new Date(e.created_at),{addSuffix:!0,locale:g.ru})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 items-start sm:items-end",children:[r.jsx(m.C,{variant:t.variant,className:"text-xs sm:text-sm",children:t.label}),r.jsx(m.C,{variant:s.variant,className:"text-xs sm:text-sm",children:s.label})]})]})}),r.jsx(o.aY,{className:"p-4 sm:p-6 pt-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm sm:text-base text-muted-foreground",children:"Сумма заказа:"}),(0,r.jsxs)("span",{className:"text-lg sm:text-xl font-bold",children:[e.total_amount.toLocaleString("ru-RU")," ₽"]})]})}),r.jsx(o.eW,{className:"p-4 sm:p-6 pt-0",children:r.jsx(c.z,{asChild:!0,className:"w-full cursor-pointer text-sm sm:text-base",children:(0,r.jsxs)(d.default,{href:`/orders/${e.id}`,children:[r.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Открыть чат"]})})})]},e.id)})}):r.jsx(o.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:(0,r.jsxs)(o.aY,{className:"flex flex-col items-center justify-center py-8 sm:py-16",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:r.jsx(u.Z,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary"})}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 text-center",children:"У вас пока нет заказов"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-6 text-center",children:"Начните с выбора услуг"}),r.jsx(c.z,{asChild:!0,className:"cursor-pointer",children:r.jsx(d.default,{href:"/services",children:"Перейти к услугам"})})]})})]}),r.jsx("div",{className:"border-t border-border/40 mt-12 py-6",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(n.default,{src:l.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),r.jsx("span",{className:"text-sm font-medium",children:"Lonely PRICE"})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground text-center sm:text-right",children:["\xa9 ",new Date().getFullYear()," Все права защищены"]})]})})})]})}},74888:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});let r=(0,s(68570).createProxy)(String.raw`/home/ensi/Projects/lonlyprice/components/mobile-nav.tsx#MobileNav`)},18897:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var r=s(19510);s(71159);var a=s(43025),i=s(46145),n=s(50650);let l=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,asChild:s=!1,...i}){let d=s?a.g7:"span";return r.jsx(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:t}),e),...i})}},2946:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var r=s(19510);s(71159);var a=s(43025),i=s(46145),n=s(50650);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:t,size:s,asChild:i=!1,...d}){let c=i?a.g7:"button";return r.jsx(c,{"data-slot":"button",className:(0,n.cn)(l({variant:t,size:s,className:e})),...d})}},46697:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>o,ll:()=>l});var r=s(19510);s(71159);var a=s(50650);function i({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function n({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function l({className:e,...t}){return r.jsx("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return r.jsx("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function c({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function o({className:e,...t}){return r.jsx("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},19692:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var r=s(24746),a=s(71615);async function i(){let e=await (0,a.cookies)(),t="https://lvjmvxhppvssyhryjaal.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2am12eGhwcHZzc3locnlqYWFsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MDE2MzQsImV4cCI6MjA4MTI3NzYzNH0.xpHw8-n5DI1w0EZQz415rMn_Ejdr2GWxMzaz7ySIvB0";if(!t||!s)throw Error("Missing Supabase environment variables. Please create .env.local file with NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");return(0,r.createServerClient)(t,s,{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}},50650:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(55761),a=s(62386);function i(...e){return(0,a.m6)((0,r.W)(e))}},39755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(27162).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},11242:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(27162).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},72298:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(27162).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},56842:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r={src:"/_next/static/media/logo.1e858ee9.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEX//v/w8PDMzMz4+Pi1tbWFhYWfn59ubm4PDw+Xl5cWOcINAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nGNgwATMTIwQBgsrCwOYycrBzsLGxMDAwMTJxMwIlYWpBlMACXYASgctBm8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},30656:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r={src:"/_next/static/media/logo.1e858ee9.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEX//v/w8PDMzMz4+Pi1tbWFhYWfn59ubm4PDw+Xl5cWOcINAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nGNgwATMTIwQBgsrCwOYycrBzsLGxMDAwMTJxMwIlYWpBlMACXYASgctBm8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,959,438,404,684,470,590,710,877,604],()=>s(39109));module.exports=r})();