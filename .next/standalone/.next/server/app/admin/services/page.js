(()=>{var e={};e.id=838,e.ids=[838],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},34960:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(1753),s(90596),s(11506),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["admin",{children:["services",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1753)),"/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,90596)),"/home/ensi/Projects/lonlyprice/app/admin/layout.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/home/ensi/Projects/lonlyprice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],o=["/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx"],u="/admin/services/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/services/page",pathname:"/admin/services",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8979:(e,t,s)=>{Promise.resolve().then(s.bind(s,6562))},6562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(10326),a=s(17577),i=s(42945),n=s(35047),l=s(90772),c=s(33071),d=s(15940),o=s(567),u=s(54432),m=s(87673),p=s(45842),x=s(62288),h=s(83855),f=s(69508),j=s(98091);function b(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)([]),[b,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null),[_,P]=(0,a.useState)(null),R=async()=>{let t=(0,i.e)(),{data:{user:r}}=await t.auth.getUser();if(!r){e.push("/auth/login");return}w(r);let{data:a}=await t.from("profiles").select("*").eq("id",r.id).single();a&&P(a);let{data:n}=await t.from("services").select("*").order("category");n&&s(n)},S=async e=>{e.preventDefault();let t=(0,i.e)(),s=new FormData(e.currentTarget),r={title:s.get("title"),description:s.get("description"),price:s.get("price"),category:s.get("category"),is_active:"on"===s.get("is_active")};b?await t.from("services").update(r).eq("id",b.id):await t.from("services").insert(r),v(!1),g(null),R()},T=async e=>{if(!confirm("Вы уверены?"))return;let t=(0,i.e)();await t.from("services").delete().eq("id",e),R()},C=e=>{g(e),v(!0)};return N&&_?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6 sm:mb-8 flex items-center justify-between",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Управление услугами"}),(0,r.jsxs)(x.Vq,{open:y,onOpenChange:v,children:[r.jsx(x.hg,{asChild:!0,children:(0,r.jsxs)(l.z,{onClick:()=>{g(null),v(!0)},size:"sm",className:"text-sm sm:text-base",children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Добавить услугу"}),r.jsx("span",{className:"sm:hidden",children:"Добавить"})]})}),(0,r.jsxs)(x.cZ,{className:"max-w-[95vw] sm:max-w-2xl",children:[(0,r.jsxs)(x.fK,{children:[r.jsx(x.$N,{className:"text-lg sm:text-xl",children:b?"Редактировать":"Новая услуга"}),r.jsx(x.Be,{className:"text-sm sm:text-base",children:b?"Измените данные услуги":"Заполните форму для создания новой услуги"})]}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(p._,{htmlFor:"title",className:"text-sm sm:text-base",children:"Название"}),r.jsx(u.I,{id:"title",name:"title",required:!0,defaultValue:b?.title,className:"text-sm sm:text-base"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(p._,{htmlFor:"description",className:"text-sm sm:text-base",children:"Описание"}),r.jsx(m.g,{id:"description",name:"description",required:!0,defaultValue:b?.description,className:"text-sm sm:text-base",rows:3})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(p._,{htmlFor:"price",className:"text-sm sm:text-base",children:"Цена"}),r.jsx(u.I,{id:"price",name:"price",type:"text",required:!0,placeholder:"Например: от 3999 ₽",defaultValue:b?.price,className:"text-sm sm:text-base"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(p._,{htmlFor:"category",className:"text-sm sm:text-base",children:"Категория"}),r.jsx(u.I,{id:"category",name:"category",required:!0,defaultValue:b?.category,className:"text-sm sm:text-base"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",defaultChecked:b?.is_active??!0,className:"w-4 h-4"}),r.jsx(p._,{htmlFor:"is_active",className:"text-sm sm:text-base",children:"Активна"})]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-col sm:flex-row",children:[r.jsx(l.z,{type:"submit",className:"w-full sm:w-auto",children:"Сохранить"}),r.jsx(l.z,{type:"button",variant:"outline",onClick:()=>v(!1),className:"w-full sm:w-auto",children:"Отмена"})]})]})]})]})]}),(0,r.jsxs)(c.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[r.jsx(c.Ol,{className:"p-4 sm:p-6",children:r.jsx(c.ll,{className:"text-lg sm:text-xl",children:"Список услуг"})}),r.jsx(c.aY,{className:"p-4 sm:p-6 pt-0",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)(d.Table,{className:"min-w-full",children:[r.jsx(d.TableHeader,{children:(0,r.jsxs)(d.TableRow,{children:[r.jsx(d.TableHead,{className:"whitespace-nowrap",children:"Название"}),r.jsx(d.TableHead,{className:"whitespace-nowrap",children:"Категория"}),r.jsx(d.TableHead,{className:"whitespace-nowrap",children:"Цена"}),r.jsx(d.TableHead,{className:"whitespace-nowrap",children:"Статус"}),r.jsx(d.TableHead,{className:"whitespace-nowrap",children:"Действия"})]})}),r.jsx(d.TableBody,{children:t.map(e=>(0,r.jsxs)(d.TableRow,{children:[r.jsx(d.TableCell,{className:"font-medium max-w-[200px] sm:max-w-md",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm sm:text-base",children:e.title}),r.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:e.description})]})}),r.jsx(d.TableCell,{children:r.jsx(o.C,{variant:"secondary",className:"text-xs sm:text-sm",children:e.category})}),r.jsx(d.TableCell,{className:"font-bold text-sm sm:text-base",children:e.price}),r.jsx(d.TableCell,{children:e.is_active?r.jsx(o.C,{variant:"default",className:"text-xs sm:text-sm",children:"Активна"}):r.jsx(o.C,{variant:"destructive",className:"text-xs sm:text-sm",children:"Неактивна"})}),r.jsx(d.TableCell,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>C(e),className:"text-xs sm:text-sm h-8 px-2 sm:px-3",children:[r.jsx(f.Z,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Изменить"}),r.jsx("span",{className:"sm:hidden",children:"Изм."})]}),(0,r.jsxs)(l.z,{variant:"destructive",size:"sm",onClick:()=>T(e.id),className:"text-xs sm:text-sm h-8 px-2 sm:px-3",children:[r.jsx(j.Z,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Удалить"}),r.jsx("span",{className:"sm:hidden",children:"Удал."})]})]})})]},e.id))})]})})})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1753:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx#default`)},58585:(e,t,s)=>{"use strict";var r=s(61085);s.o(r,"redirect")&&s.d(t,{redirect:function(){return r.redirect}})},61085:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return r.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=s(83953),a=s(16399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{isNotFoundError:function(){return a},notFound:function(){return r}});let s="NEXT_NOT_FOUND";function r(){let e=Error(s);throw e.digest=s,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return s}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RedirectType:function(){return r},getRedirectError:function(){return c},getRedirectStatusCodeFromError:function(){return x},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return o},redirect:function(){return d}});let a=s(54580),i=s(72934),n=s(8586),l="NEXT_REDIRECT";function c(e,t,s){void 0===s&&(s=n.RedirectStatusCode.TemporaryRedirect);let r=Error(l);r.digest=l+";"+t+";"+e+";"+s+";";let i=a.requestAsyncStorage.getStore();return i&&(r.mutableCookies=i.mutableCookies),r}function d(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw c(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function o(e,t){void 0===t&&(t="replace");let s=i.actionAsyncStorage.getStore();throw c(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,s,r,a]=e.digest.split(";",4),i=Number(a);return t===l&&("replace"===s||"push"===s)&&"string"==typeof r&&!isNaN(i)&&i in n.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function x(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51032:(e,t,s)=>{"use strict";s.d(t,{x7:()=>a});var r=s(68570);let a=(0,r.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#Toaster`);(0,r.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#toast`),(0,r.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#useSonner`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,959,438,404,684,470,590,710,604,27],()=>s(34960));module.exports=r})();