(()=>{var e={};e.id=838,e.ids=[838],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},34960:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(1753),t(75016),t(11506),t(35866);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["services",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1753)),"/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,75016)),"/home/ensi/Projects/lonlyprice/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"/home/ensi/Projects/lonlyprice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx"],m="/admin/services/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/services/page",pathname:"/admin/services",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8979:(e,s,t)=>{Promise.resolve().then(t.bind(t,5118))},37757:(e,s,t)=>{Promise.resolve().then(t.bind(t,58023)),Promise.resolve().then(t.t.bind(t,92481,23)),Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,85999)),Promise.resolve().then(t.bind(t,30656))},5118:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(10326),r=t(17577),i=t(42945),l=t(35047),n=t(90772),d=t(33071),c=t(15940),o=t(567),m=t(54432),x=t(77863);function u({className:e,...s}){return a.jsx("textarea",{"data-slot":"textarea",className:(0,x.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}var h=t(45842),p=t(62288),b=t(83855);let f=(0,t(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var j=t(98091);function v(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)([]),[x,v]=(0,r.useState)(null),[g,N]=(0,r.useState)(!1),[w,y]=(0,r.useState)(null),[_,P]=(0,r.useState)(null),C=async()=>{let s=(0,i.e)(),{data:{user:a}}=await s.auth.getUser();if(!a){e.push("/auth/login");return}y(a);let{data:r}=await s.from("profiles").select("*").eq("id",a.id).single();r&&P(r);let{data:l}=await s.from("services").select("*").order("category");l&&t(l)},k=async e=>{e.preventDefault();let s=(0,i.e)(),t=new FormData(e.currentTarget),a={title:t.get("title"),description:t.get("description"),price:t.get("price"),category:t.get("category"),is_active:"on"===t.get("is_active")};x?await s.from("services").update(a).eq("id",x.id):await s.from("services").insert(a),N(!1),v(null),C()},z=async e=>{if(!confirm("Вы уверены?"))return;let s=(0,i.e)();await s.from("services").delete().eq("id",e),C()},T=e=>{v(e),N(!0)};return w&&_?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8 flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Управление услугами"}),(0,a.jsxs)(p.Vq,{open:g,onOpenChange:N,children:[a.jsx(p.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{onClick:()=>{v(null),N(!0)},size:"sm",className:"text-sm sm:text-base",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Добавить услугу"}),a.jsx("span",{className:"sm:hidden",children:"Добавить"})]})}),(0,a.jsxs)(p.cZ,{className:"max-w-[95vw] sm:max-w-2xl",children:[(0,a.jsxs)(p.fK,{children:[a.jsx(p.$N,{className:"text-lg sm:text-xl",children:x?"Редактировать":"Новая услуга"}),a.jsx(p.Be,{className:"text-sm sm:text-base",children:x?"Измените данные услуги":"Заполните форму для создания новой услуги"})]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx(h._,{htmlFor:"title",className:"text-sm sm:text-base",children:"Название"}),a.jsx(m.I,{id:"title",name:"title",required:!0,defaultValue:x?.title,className:"text-sm sm:text-base"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx(h._,{htmlFor:"description",className:"text-sm sm:text-base",children:"Описание"}),a.jsx(u,{id:"description",name:"description",required:!0,defaultValue:x?.description,className:"text-sm sm:text-base",rows:3})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx(h._,{htmlFor:"price",className:"text-sm sm:text-base",children:"Цена"}),a.jsx(m.I,{id:"price",name:"price",type:"text",required:!0,placeholder:"Например: от 3999 ₽",defaultValue:x?.price,className:"text-sm sm:text-base"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx(h._,{htmlFor:"category",className:"text-sm sm:text-base",children:"Категория"}),a.jsx(m.I,{id:"category",name:"category",required:!0,defaultValue:x?.category,className:"text-sm sm:text-base"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",defaultChecked:x?.is_active??!0,className:"w-4 h-4"}),a.jsx(h._,{htmlFor:"is_active",className:"text-sm sm:text-base",children:"Активна"})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-col sm:flex-row",children:[a.jsx(n.z,{type:"submit",className:"w-full sm:w-auto",children:"Сохранить"}),a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>N(!1),className:"w-full sm:w-auto",children:"Отмена"})]})]})]})]})]}),(0,a.jsxs)(d.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[a.jsx(d.Ol,{className:"p-4 sm:p-6",children:a.jsx(d.ll,{className:"text-lg sm:text-xl",children:"Список услуг"})}),a.jsx(d.aY,{className:"p-4 sm:p-6 pt-0",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(c.Table,{className:"min-w-full",children:[a.jsx(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[a.jsx(c.TableHead,{className:"whitespace-nowrap",children:"Название"}),a.jsx(c.TableHead,{className:"whitespace-nowrap",children:"Категория"}),a.jsx(c.TableHead,{className:"whitespace-nowrap",children:"Цена"}),a.jsx(c.TableHead,{className:"whitespace-nowrap",children:"Статус"}),a.jsx(c.TableHead,{className:"whitespace-nowrap",children:"Действия"})]})}),a.jsx(c.TableBody,{children:s.map(e=>(0,a.jsxs)(c.TableRow,{children:[a.jsx(c.TableCell,{className:"font-medium max-w-[200px] sm:max-w-md",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm sm:text-base",children:e.title}),a.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:e.description})]})}),a.jsx(c.TableCell,{children:a.jsx(o.C,{variant:"secondary",className:"text-xs sm:text-sm",children:e.category})}),a.jsx(c.TableCell,{className:"font-bold text-sm sm:text-base",children:e.price}),a.jsx(c.TableCell,{children:e.is_active?a.jsx(o.C,{variant:"default",className:"text-xs sm:text-sm",children:"Активна"}):a.jsx(o.C,{variant:"destructive",className:"text-xs sm:text-sm",children:"Неактивна"})}),a.jsx(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>T(e),className:"text-xs sm:text-sm h-8 px-2 sm:px-3",children:[a.jsx(f,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Изменить"}),a.jsx("span",{className:"sm:hidden",children:"Изм."})]}),(0,a.jsxs)(n.z,{variant:"destructive",size:"sm",onClick:()=>z(e.id),className:"text-xs sm:text-sm h-8 px-2 sm:px-3",children:[a.jsx(j.Z,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Удалить"}),a.jsx("span",{className:"sm:hidden",children:"Удал."})]})]})})]},e.id))})]})})})]})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326);t(17577);var r=t(77863);function i({className:e,type:s,...t}){return a.jsx("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}},15940:(e,s,t)=>{"use strict";t.d(s,{Table:()=>i,TableBody:()=>n,TableCell:()=>o,TableHead:()=>c,TableHeader:()=>l,TableRow:()=>d});var a=t(10326);t(17577);var r=t(77863);function i({className:e,...s}){return a.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:a.jsx("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...s})})}function l({className:e,...s}){return a.jsx("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...s})}function n({className:e,...s}){return a.jsx("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...s})}function d({className:e,...s}){return a.jsx("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function c({className:e,...s}){return a.jsx("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function o({className:e,...s}){return a.jsx("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}},42945:(e,s,t)=>{"use strict";let a;t.d(s,{e:()=>i});var r=t(63292);function i(){if(a)return a;let e="https://lvjmvxhppvssyhryjaal.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2am12eGhwcHZzc3locnlqYWFsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MDE2MzQsImV4cCI6MjA4MTI3NzYzNH0.xpHw8-n5DI1w0EZQz415rMn_Ejdr2GWxMzaz7ySIvB0";if(!e||!s)throw Error("Missing Supabase environment variables");return a=(0,r.createBrowserClient)(e,s)}},75016:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(19510),r=t(57371),i=t(2946),l=t(68570);let n=(0,l.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#Toaster`);(0,l.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#toast`),(0,l.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/node_modules/sonner/dist/index.mjs#useSonner`);var d=t(19692),c=t(58585),o=t(17710),m=t(56842),x=t(74888);async function u({children:e}){let s=await (0,d.e)(),{data:{user:t}}=await s.auth.getUser();t||(0,c.redirect)("/auth/login");let{data:l}=await s.from("profiles").select("is_admin").eq("id",t.id).single();l?.is_admin||(0,c.redirect)("/");let{count:u}=await s.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",t.id);return(0,a.jsxs)("div",{className:"min-h-screen",children:[a.jsx("div",{className:"border-b border-border/40 bg-background/80 backdrop-blur-xl sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.z,{user:t,cartCount:u||0,isAdmin:l?.is_admin||!1}),(0,a.jsxs)(r.default,{href:"/",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx(o.default,{src:m.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),a.jsx("span",{className:"text-base sm:text-lg font-bold",children:"Lonely PRICE"})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-4 lg:gap-6",children:[(0,a.jsxs)("nav",{className:"flex gap-3 lg:gap-4",children:[a.jsx(r.default,{href:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-accent",children:"Панель управления"}),a.jsx(r.default,{href:"/admin/users",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-accent",children:"Пользователи"}),a.jsx(r.default,{href:"/admin/services",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-accent",children:"Услуги"}),a.jsx(r.default,{href:"/admin/orders",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-accent",children:"Заказы"})]}),a.jsx(i.z,{asChild:!0,variant:"outline",size:"sm",className:"cursor-pointer",children:a.jsx(r.default,{href:"/services",children:"Вернуться к сайту"})})]}),a.jsx("div",{className:"flex md:hidden items-center gap-2",children:a.jsx(i.z,{asChild:!0,variant:"outline",size:"sm",className:"cursor-pointer text-xs px-2",children:a.jsx(r.default,{href:"/services",children:"На сайт"})})})]})})}),a.jsx("main",{className:"flex-1",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-6 sm:py-8",children:e})}),a.jsx("div",{className:"border-t border-border/40 py-6 mt-96",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx(o.default,{src:m.Z,alt:"Lonely Price",width:500,height:300,priority:!0,className:"rounded-[50%]"})}),a.jsx("span",{className:"text-sm font-medium",children:"Lonely PRICE"})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center sm:text-right",children:["\xa9 ",new Date().getFullYear()," Админ-панель. Все права защищены."]})]})})}),a.jsx(n,{position:"top-right"})]})}},1753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/home/ensi/Projects/lonlyprice/app/admin/services/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,438,959,404,711,741,590,710,999,292,127,982],()=>t(34960));module.exports=a})();