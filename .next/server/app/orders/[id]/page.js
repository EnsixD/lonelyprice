(()=>{var e={};e.id=12,e.ids=[12],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30202:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(85890),t(11506),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["orders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,85890)),"/home/ensi/Projects/lonlyprice/app/orders/[id]/page.tsx"]}]},{}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"/home/ensi/Projects/lonlyprice/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],o=["/home/ensi/Projects/lonlyprice/app/orders/[id]/page.tsx"],m="/orders/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/orders/[id]/page",pathname:"/orders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},70538:(e,s,t)=>{Promise.resolve().then(t.bind(t,29546)),Promise.resolve().then(t.bind(t,58023)),Promise.resolve().then(t.bind(t,76165)),Promise.resolve().then(t.t.bind(t,79404,23))},29546:(e,s,t)=>{"use strict";t.d(s,{default:()=>z});var a=t(10326),r=t(17577),l=t(42945),i=t(54432),n=t(90772),d=t(65685),c=t(40617),o=t(77506),m=t(94019),x=t(41291),u=t(62881);let h=(0,u.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),p=(0,u.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),g=(0,u.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),f=(0,u.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var v=t(32933);let j=(0,u.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var b=t(69436),y=t(15684),N=t(4789),w=t(46226),k=t(62288),_=t(85562);function z({orderId:e,currentUser:s,orderStatus:t="pending",paymentStatus:u="unpaid"}){let[z,Z]=(0,r.useState)(""),[C,S]=(0,r.useState)([]),[P,M]=(0,r.useState)(null),I=(0,r.useRef)(null),q=(0,r.useRef)(null),A=(0,r.useRef)(null),D=(0,r.useRef)(null),E=(0,r.useRef)(!0),R="cancelled"===t||"completed"===t;if(!e||!s?.id)return(0,a.jsxs)("div",{className:"flex flex-col h-full items-center justify-center p-6 text-center",children:[a.jsx(c.Z,{className:"w-12 h-12 text-muted-foreground/50 mb-3"}),a.jsx("div",{className:"text-muted-foreground mb-1",children:"Чат недоступен"}),a.jsx("div",{className:"text-sm text-muted-foreground/70",children:"Нет данных для отображения"})]});let{messages:O,sendMessage:$,connectionStatus:L,isLoading:U,uploading:V}=function(e,s){let t=(0,l.e)(),[a,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)("connecting"),[m,x]=(0,r.useState)(!1),u=(0,r.useRef)(null),h=(0,r.useRef)(new Set),p=(0,r.useCallback)(async()=>{try{d(!0);let{data:s,error:a}=await t.from("messages").select("*").eq("order_id",e).order("created_at",{ascending:!0});if(a)throw a;let r=Array.from(new Set(s?.map(e=>e.sender_id)||[])),l=[];if(r.length>0){let{data:e,error:s}=await t.from("profiles").select("id, full_name, avatar_url, is_admin").in("id",r);if(s)throw s;l=e||[]}let n=s?.map(e=>{let s=l?.find(s=>s.id===e.sender_id),t=[];return e.attachments&&(Array.isArray(e.attachments)?t=e.attachments:"object"==typeof e.attachments&&(t=Object.values(e.attachments).filter(e=>"string"==typeof e))),{...e,profiles:s,attachments:t}})||[];i(n)}catch(e){}finally{d(!1)}},[e,t]),g=(0,r.useCallback)(async s=>new Promise(async(a,r)=>{try{if(s.size>10485760)throw Error("Файл слишком большой. Максимум 10MB");let r=s.name.split(".").pop(),l=`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${r}`,i=`chat/${e}/${l}`,{error:n}=await t.storage.from("chat-attachments").upload(i,s,{cacheControl:"3600",upsert:!1});if(n)throw n;let{data:{publicUrl:d}}=t.storage.from("chat-attachments").getPublicUrl(i);a(d)}catch(e){r(e)}}),[e,t]),f=(0,r.useCallback)(async(a,r)=>{if(!s?.id)return null;let l=a&&a.trim().length>0,n=r&&r.length>0;if(!l&&!n)return null;x(!0);try{let d=[];if(n&&r){x(!0);let e=r.map(async e=>{try{return await g(e)}catch(e){throw e}});try{d=(await Promise.all(e)).filter(e=>e)}catch(e){if(!l)throw x(!1),e}}let c=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o=a.trim();!o&&d.length>0&&(o="\uD83D\uDCCE Файл(ы)");let m={id:c,order_id:e,sender_id:s.id,message:o,is_read:!1,created_at:new Date().toISOString(),attachments:d,profiles:{id:s.id,full_name:"Вы",is_admin:s.is_admin||!1}};i(e=>[...e,m]),h.current.add(c);let u={order_id:e,sender_id:s.id,message:o,is_read:!1};d.length>0&&(u.attachments=d);let{data:p,error:f}=await t.from("messages").insert(u).select().single();if(f)return i(e=>e.filter(e=>e.id!==c)),h.current.delete(c),x(!1),null;let{data:v}=await t.from("profiles").select("id, full_name, avatar_url, is_admin").eq("id",s.id).single(),j={...p,attachments:d,profiles:v||{id:s.id,full_name:"Вы",is_admin:s.is_admin||!1}};return i(e=>{let s=e.filter(e=>e.id!==c);return(h.current.delete(c),s.some(e=>e.id===j.id))?s:[...s,j]}),x(!1),j}catch(e){return x(!1),null}},[e,t,s,g]);return(0,r.useCallback)(()=>{u.current&&t.removeChannel(u.current);let a=t.channel(`order-${e}-messages`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`order_id=eq.${e}`},async e=>{if(h.current.has(e.new.id)||e.new.sender_id===s?.id)return;let{data:a}=await t.from("profiles").select("id, full_name, avatar_url, is_admin").eq("id",e.new.sender_id).single(),r=[];e.new.attachments&&(Array.isArray(e.new.attachments)?r=e.new.attachments:"object"==typeof e.new.attachments&&(r=Object.values(e.new.attachments).filter(e=>"string"==typeof e)));let l={...e.new,attachments:r,profiles:a};i(e=>e.some(e=>e.id===l.id)?e:[...e,l])}).subscribe(e=>{"SUBSCRIBED"===e?o("connected"):("CHANNEL_ERROR"===e||"CLOSED"===e)&&o("disconnected")});return u.current=a,()=>{u.current&&t.removeChannel(u.current),h.current.clear()}},[e,t,s?.id]),{messages:a,loadMessages:p,sendMessage:f,uploadFile:g,connectionStatus:c,isLoading:n,uploading:m}}(e,s),B=(0,r.useCallback)((e="smooth")=>{if(q.current&&E.current){let s=q.current.querySelector("[data-radix-scroll-area-viewport]");s&&s.scrollTo({top:s.scrollHeight,behavior:e})}},[]);(0,r.useCallback)(()=>{let e=q.current?.querySelector("[data-radix-scroll-area-viewport]");if(e){let s=e.scrollHeight-e.scrollTop-e.clientHeight<100;E.current=s}},[]);let G=e=>{S(s=>s.filter((s,t)=>t!==e))},Y=async e=>{if(e.preventDefault(),(z.trim()||0!==C.length)&&!R)try{await $(z,C)&&(Z(""),S([]),setTimeout(()=>{E.current=!0,B("smooth")},100))}catch(e){}};return U?(0,a.jsxs)("div",{className:"flex flex-col h-full items-center justify-center p-8",children:[a.jsx(o.Z,{className:"w-8 h-8 animate-spin text-primary mb-2"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Загрузка сообщений..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(k.Vq,{open:!!P,onOpenChange:()=>M(null),children:a.jsx(k.cZ,{className:"max-w-4xl max-h-[90vh] p-0 bg-transparent border-none",children:P&&(0,a.jsxs)("div",{className:"relative w-full h-full",children:[a.jsx(w.default,{src:P,alt:"Просмотр изображения",width:1200,height:800,className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),a.jsx(k.GG,{className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full",children:a.jsx(m.Z,{className:"w-5 h-5"})})]})})}),(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"border-b px-4 py-3 bg-muted/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"font-medium text-sm sm:text-base",children:["Чат по заказу #",e.slice(0,8)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${"connected"===L?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"connected"===L?"Online":"Offline"})]})]})}),R&&a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-300 text-xs sm:text-sm",children:[a.jsx(x.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsxs)("span",{children:["Чат недоступен для"," ","cancelled"===t?"отмененных":"завершенных"," ","заказов"]})]})}),a.jsx("div",{ref:q,className:"flex-1 overflow-hidden",children:a.jsx(d.x,{className:"h-full p-3 sm:p-4",ref:q,children:(0,a.jsxs)("div",{ref:A,className:"space-y-3 sm:space-y-4 pb-4",children:[0===O.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-12 text-center",children:[a.jsx(c.Z,{className:"w-12 h-12 text-muted-foreground/50 mb-3"}),a.jsx("div",{className:"text-muted-foreground mb-1 text-sm sm:text-base",children:"Нет сообщений"}),a.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground/70",children:"Начните общение первым"})]}):O.map(e=>{let t=e.sender_id===s.id,r=e.id.startsWith("temp-"),l=t?"Вы":e.profiles?.full_name||"Пользователь",i=l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,a.jsxs)("div",{className:`flex ${t?"justify-end":"justify-start"} gap-2 sm:gap-3`,children:[!t&&(0,a.jsxs)(_.qE,{className:"w-8 h-8 sm:w-9 sm:h-9 flex-shrink-0",children:[a.jsx(_.F$,{src:e.profiles?.avatar_url}),a.jsx(_.Q5,{className:"text-xs",children:i})]}),(0,a.jsxs)("div",{className:`max-w-[85%] ${t?"text-right":""}`,children:[!t&&a.jsx("div",{className:"text-xs text-muted-foreground mb-1 ml-1",children:l}),(0,a.jsxs)("div",{className:`px-3 sm:px-4 py-2 sm:py-3 rounded-xl text-sm ${r?"bg-muted opacity-70":t?"bg-primary text-primary-foreground":"bg-muted"} ${t?"rounded-br-none":"rounded-bl-none"}`,children:[e.message&&a.jsx("div",{className:"break-words whitespace-pre-wrap mb-2",children:e.message}),e.attachments&&e.attachments.length>0&&a.jsx("div",{className:"mt-2 space-y-2",children:e.attachments.map((e,s)=>{let t=e.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/i);return a.jsx("div",{className:"relative group",children:t?(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"w-32 h-32 sm:w-48 sm:h-48 rounded-lg overflow-hidden border cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>M(e),children:a.jsx(w.default,{src:e,alt:"Прикрепленное фото",width:192,height:192,className:"w-full h-full object-cover",unoptimized:!0})}),a.jsx(n.z,{size:"icon",variant:"ghost",className:"absolute top-1 sm:top-2 right-1 sm:right-2 h-6 w-6 sm:h-7 sm:w-7 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>M(e),children:a.jsx(h,{className:"w-3 h-3"})}),a.jsx(n.z,{size:"icon",variant:"ghost",className:"absolute bottom-1 sm:bottom-2 right-1 sm:right-2 h-6 w-6 sm:h-7 sm:w-7 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>{s.preventDefault(),window.open(e,"_blank")},children:a.jsx(p,{className:"w-3 h-3"})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 sm:p-3 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[a.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:"text-xs sm:text-sm truncate",children:e.split("/").pop()||`Файл ${s+1}`})}),a.jsx(n.z,{size:"icon",variant:"ghost",onClick:()=>window.open(e,"_blank"),className:"h-7 w-7 sm:h-8 sm:w-8",children:a.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})},s)})}),(0,a.jsxs)("div",{className:`mt-2 text-xs flex items-center gap-1 opacity-80 ${t?"justify-end":"justify-start"}`,children:[!r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{children:(0,y.Q)(new Date(e.created_at),{addSuffix:!0,locale:N.ru})}),t&&a.jsx("span",{className:"ml-1",children:e.is_read?a.jsx(f,{className:"w-3 h-3 inline"}):a.jsx(v.Z,{className:"w-3 h-3 inline"})})]}),r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Z,{className:"w-3 h-3 animate-spin"}),a.jsx("span",{children:"Отправка..."})]})]})]})]}),t&&(0,a.jsxs)(_.qE,{className:"w-8 h-8 sm:w-9 sm:h-9 flex-shrink-0",children:[a.jsx(_.F$,{src:s.user_metadata?.avatar_url}),a.jsx(_.Q5,{className:"text-xs",children:i})]})]},e.id)}),a.jsx("div",{ref:D})]})})}),C.length>0&&(0,a.jsxs)("div",{className:"border-t border-b p-3 bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Прикрепленные файлы:"}),(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>S([]),className:"h-7 text-xs",children:[a.jsx(m.Z,{className:"w-3 h-3 mr-1"}),"Очистить"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((e,s)=>{let t=e.type.startsWith("image/");return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 sm:px-3 py-1 sm:py-2 bg-white dark:bg-gray-800 rounded-lg border text-xs sm:text-sm",children:[t?a.jsx(j,{className:"w-3 h-3 sm:w-4 sm:h-4"}):a.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{className:"truncate max-w-[100px] sm:max-w-[150px]",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:[(e.size/1024).toFixed(1)," KB"]}),a.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>G(s),className:"h-5 w-5 sm:h-6 sm:w-6",children:a.jsx(m.Z,{className:"w-2 h-2 sm:w-3 sm:h-3"})})]},s)})})]}),(0,a.jsxs)("form",{onSubmit:Y,className:"border-t p-3 bg-background",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"file",ref:I,onChange:e=>{if(e.target.files){let s=Array.from(e.target.files).filter(e=>e.size<=10485760).slice(0,5);S(e=>[...e,...s]),e.target.value=""}},multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",className:"hidden"}),a.jsx(n.z,{type:"button",variant:"outline",size:"icon",onClick:()=>I.current?.click(),disabled:R,title:"Прикрепить файл",className:"h-10 w-10 flex-shrink-0",children:a.jsx(g,{className:"w-4 h-4"})}),a.jsx(i.I,{value:z,onChange:e=>Z(e.target.value),placeholder:R?"Чат недоступен":"Введите сообщение...",disabled:R,className:"flex-1 text-sm sm:text-base"}),a.jsx(n.z,{type:"submit",disabled:!z.trim()&&0===C.length||R||V,size:"icon",className:"h-10 w-10 flex-shrink-0",children:V?a.jsx(o.Z,{className:"w-4 h-4 animate-spin"}):a.jsx(b.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 flex justify-between",children:[a.jsx("span",{className:"hidden sm:inline",children:"Макс. 5 файлов, 2MB каждый"}),a.jsx("span",{className:"sm:hidden",children:"Макс. 5 файлов"}),"disconnected"===L&&a.jsx("span",{className:"text-red-500 text-xs",children:"Нет соединения"})]})]})]})]})}},76165:(e,s,t)=>{"use strict";t.d(s,{PaymentDetails:()=>g});var a=t(10326),r=t(17577),l=t(90772),i=t(33071),n=t(62881);let d=(0,n.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var c=t(28916);let o=(0,n.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var m=t(32933);let x=(0,n.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var u=t(41291),h=t(85999);let p=[{id:"phone",name:"По номеру телефона",icon:a.jsx(d,{className:"w-5 h-5"}),details:"+79527985736",description:"Перевод на номер телефона (ВТБ)"},{id:"card",name:"По номеру карты",icon:a.jsx(c.Z,{className:"w-5 h-5"}),details:"2200 7000 1234 5678",description:"Карта ВТБ (Юлия А.)"},{id:"bank",name:"Банковский перевод",icon:a.jsx(o,{className:"w-5 h-5"}),details:"ВТБ (ПАО)",description:"БИК 044525187, к/с 30101810700000000187"}];function g({orderId:e,amount:s}){let[t,n]=(0,r.useState)(null),d=(e,s)=>{navigator.clipboard.writeText(e),n(s),h.A.success("Скопировано в буфер обмена"),setTimeout(()=>n(null),2e3)};return(0,a.jsxs)(i.Zb,{className:"border shadow-sm hover:shadow-md transition-shadow",children:[a.jsx(i.Ol,{className:"pb-3",children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg",children:[a.jsx(c.Z,{className:"w-5 h-5 text-primary"}),"Реквизиты для оплаты"]})}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Сумма к оплате"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-primary",children:[s.toLocaleString("ru-RU")," ₽"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Номер заказа"}),(0,a.jsxs)("p",{className:"text-lg font-mono",children:["#",e.slice(0,8)]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Комментарий к платежу"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded flex-1",children:["Заказ #",e.slice(0,8)," Lonely PRICE"]}),a.jsx(l.z,{size:"icon",variant:"ghost",onClick:()=>d(`Заказ #${e.slice(0,8)} Lonely PRICE`,"comment"),className:"h-10 w-10",children:"comment"===t?a.jsx(m.Z,{className:"w-4 h-4 text-green-500"}):a.jsx(x,{className:"w-4 h-4"})})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Выберите удобный способ оплаты:"}),p.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:border-primary/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]})]}),a.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>d(e.details,e.id),className:"h-9 w-9",children:t===e.id?a.jsx(m.Z,{className:"w-4 h-4 text-green-500"}):a.jsx(x,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:a.jsx("p",{className:"font-mono text-lg text-center",children:e.details})})]},e.id))]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx(u.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[a.jsx("p",{className:"font-medium",children:"Инструкция по оплате:"}),(0,a.jsxs)("ol",{className:"list-decimal ml-4 mt-1 space-y-1",children:[a.jsx("li",{children:"Скопируйте реквизиты удобным способом"}),(0,a.jsxs)("li",{children:["Переведите сумму ",s.toLocaleString("ru-RU")," ₽"]}),(0,a.jsxs)("li",{children:["В комментарии укажите:"," ",(0,a.jsxs)("strong",{children:["Заказ #",e.slice(0,8)]})]}),a.jsx("li",{children:"Отправьте фото чека в чат для подтверждения"})]})]})]})})]})]})}},85562:(e,s,t)=>{"use strict";t.d(s,{qE:()=>b,Q5:()=>N,F$:()=>y});var a=t(10326),r=t(17577),l=t(93095),i=t(55049),n=t(65819),d=t(45226),c="Avatar",[o,m]=(0,l.b)(c),[x,u]=o(c),h=r.forwardRef((e,s)=>{let{__scopeAvatar:t,...l}=e,[i,n]=r.useState("idle");return(0,a.jsx)(x,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:n,children:(0,a.jsx)(d.WV.span,{...l,ref:s})})});h.displayName=c;var p="AvatarImage",g=r.forwardRef((e,s)=>{let{__scopeAvatar:t,src:l,onLoadingStatusChange:c=()=>{},...o}=e,m=u(p,t),x=function(e,s){let[t,a]=r.useState("idle");return(0,n.b)(()=>{if(!e){a("error");return}let t=!0,r=new window.Image,l=e=>()=>{t&&a(e)};return a("loading"),r.onload=l("loaded"),r.onerror=l("error"),r.src=e,s&&(r.referrerPolicy=s),()=>{t=!1}},[e,s]),t}(l,o.referrerPolicy),h=(0,i.W)(e=>{c(e),m.onImageLoadingStatusChange(e)});return(0,n.b)(()=>{"idle"!==x&&h(x)},[x,h]),"loaded"===x?(0,a.jsx)(d.WV.img,{...o,ref:s,src:l}):null});g.displayName=p;var f="AvatarFallback",v=r.forwardRef((e,s)=>{let{__scopeAvatar:t,delayMs:l,...i}=e,n=u(f,t),[c,o]=r.useState(void 0===l);return r.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>o(!0),l);return()=>window.clearTimeout(e)}},[l]),c&&"loaded"!==n.imageLoadingStatus?(0,a.jsx)(d.WV.span,{...i,ref:s}):null});v.displayName=f;var j=t(77863);function b({className:e,...s}){return a.jsx(h,{"data-slot":"avatar",className:(0,j.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...s})}function y({className:e,...s}){return a.jsx(g,{"data-slot":"avatar-image",className:(0,j.cn)("aspect-square size-full",e),...s})}function N({className:e,...s}){return a.jsx(v,{"data-slot":"avatar-fallback",className:(0,j.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...s})}},33071:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>l,aY:()=>c,eW:()=>o,ll:()=>n});var a=t(10326);t(17577);var r=t(77863);function l({className:e,...s}){return a.jsx("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return a.jsx("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function n({className:e,...s}){return a.jsx("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return a.jsx("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}function c({className:e,...s}){return a.jsx("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}function o({className:e,...s}){return a.jsx("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}},62288:(e,s,t)=>{"use strict";t.d(s,{$N:()=>p,Be:()=>g,GG:()=>o,Vq:()=>n,cN:()=>h,cZ:()=>x,fK:()=>u,hg:()=>d});var a=t(10326);t(17577);var r=t(27123),l=t(94019),i=t(77863);function n({...e}){return a.jsx(r.fC,{"data-slot":"dialog",...e})}function d({...e}){return a.jsx(r.xz,{"data-slot":"dialog-trigger",...e})}function c({...e}){return a.jsx(r.h_,{"data-slot":"dialog-portal",...e})}function o({...e}){return a.jsx(r.x8,{"data-slot":"dialog-close",...e})}function m({className:e,...s}){return a.jsx(r.aV,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function x({className:e,children:s,showCloseButton:t=!0,...n}){return(0,a.jsxs)(c,{"data-slot":"dialog-portal",children:[a.jsx(m,{}),(0,a.jsxs)(r.VY,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[s,t&&(0,a.jsxs)(r.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(l.Z,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function u({className:e,...s}){return a.jsx("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function h({className:e,...s}){return a.jsx("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function p({className:e,...s}){return a.jsx(r.Dx,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...s})}function g({className:e,...s}){return a.jsx(r.dk,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...s})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var a=t(10326);t(17577);var r=t(77863);function l({className:e,type:s,...t}){return a.jsx("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}},65685:(e,s,t)=>{"use strict";t.d(s,{x:()=>i});var a=t(10326);t(17577);var r=t(73482),l=t(77863);function i({className:e,children:s,...t}){return(0,a.jsxs)(r.fC,{"data-slot":"scroll-area",className:(0,l.cn)("relative",e),...t,children:[a.jsx(r.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),a.jsx(n,{}),a.jsx(r.Ns,{})]})}function n({className:e,orientation:s="vertical",...t}){return a.jsx(r.gb,{"data-slot":"scroll-area-scrollbar",orientation:s,className:(0,l.cn)("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",e),...t,children:a.jsx(r.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},41291:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},69436:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},46226:(e,s,t)=>{"use strict";t.d(s,{default:()=>r.a});var a=t(69029),r=t.n(a)},69029:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{default:function(){return d},getImageProps:function(){return n}});let a=t(91174),r=t(23078),l=t(92481),i=a._(t(86820));function n(e){let{props:s}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(s))void 0===t&&delete s[e];return{props:s}}let d=l.Image},85890:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z,dynamic:()=>_,revalidate:()=>z});var a=t(19510),r=t(19692),l=t(58585),i=t(68570);let n=(0,i.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/components/chat/OrderChat.tsx#default`),d=(0,i.createProxy)(String.raw`/home/ensi/Projects/lonlyprice/components/payment/PaymentDetails.tsx#PaymentDetails`);var c=t(46697),o=t(18897),m=t(2946),x=t(57371),u=t(31958),h=t(72298),p=t(39755),g=t(27162);let f=(0,g.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var v=t(67245);let j=(0,g.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),b=(0,g.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var y=t(11242),N=t(99437),w=t(34215),k=t(74888);let _="force-dynamic",z=0;async function Z({params:e}){let{id:s}=await e,t=await (0,r.e)(),{data:{user:i}}=await t.auth.getUser();i||(0,l.redirect)("/auth/login");let{data:g,error:_}=await t.from("orders").select(`
      *,
      order_items (
        id,
        quantity,
        price,
        services (
          id,
          title,
          description,
          price
        )
      )
    `).eq("id",s).single();(_||!g)&&(0,l.redirect)("/");let{data:z}=await t.from("profiles").select("is_admin").eq("id",i.id).single(),Z=z?.is_admin||!1;Z||g.user_id===i.id||(0,l.redirect)("/");let{count:C}=await t.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",i.id),S=null;if(Z){let{data:e}=await t.from("profiles").select("id, full_name, email, avatar_url, phone").eq("id",g.user_id).single();S=e}let P=(e=>{let s={pending:{variant:"secondary",label:"⏳ Ожидает",color:"text-yellow-500"},processing:{variant:"default",label:"\uD83D\uDD04 В обработке",color:"text-blue-500"},completed:{variant:"outline",label:"✅ Завершен",color:"text-green-500"},cancelled:{variant:"destructive",label:"❌ Отменен",color:"text-red-500"}};return s[e]||s.pending})(g.status),M=(e=>{let s={unpaid:{variant:"destructive",label:"\uD83D\uDCB3 Не оплачен",color:"text-red-500"},pending:{variant:"secondary",label:"⏳ Ожидает оплаты",color:"text-yellow-500"},paid:{variant:"outline",label:"\uD83D\uDCB0 Оплачен",color:"text-green-500"},refunded:{variant:"secondary",label:"↩️ Возврат",color:"text-gray-500"}};return s[e]||s.unpaid})(g.payment_status);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background to-muted/20",children:[a.jsx("div",{className:"border-b border-border/40 bg-background/80 backdrop-blur-xl sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(k.z,{user:i,cartCount:C||0,isAdmin:Z}),(0,a.jsxs)(x.default,{href:"/",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx(u.Z,{className:"w-4 h-4 sm:w-6 sm:h-6 text-primary"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-base sm:text-lg font-bold",children:"Lonely PRICE"}),a.jsx("div",{className:"text-xs text-muted-foreground hidden sm:block",children:"Чат по заказу"})]})]}),a.jsx("div",{className:"hidden md:block pl-4 border-l border-border/40",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:["#",s.slice(0,8)]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.z,{asChild:!0,variant:"ghost",size:"sm",className:"gap-2 cursor-pointer",children:(0,a.jsxs)(x.default,{href:Z?"/admin/orders":"/dashboard/orders",children:[a.jsx(p.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"К заказам"})]})}),Z&&(0,a.jsxs)(o.C,{variant:"secondary",className:"gap-1 text-xs",children:[a.jsx(f,{className:"w-3 h-3"}),"Админ"]})]})]})})}),a.jsx("div",{className:"flex-1 mx-auto w-full max-w-7xl px-4 sm:px-6 py-6 sm:py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-4 sm:space-y-6",children:[(0,a.jsxs)(c.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[a.jsx(c.Ol,{className:"p-4 sm:p-6 pb-3",children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2 text-lg",children:[a.jsx(v.Z,{className:"w-5 h-5 text-primary"}),"Статус заказа"]})}),(0,a.jsxs)(c.aY,{className:"p-4 sm:p-6 pt-0 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Статус"}),a.jsx(o.C,{variant:P.variant,className:`w-full justify-center gap-1 ${P.color}`,children:P.label})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Оплата"}),a.jsx(o.C,{variant:M.variant,className:`w-full justify-center gap-1 ${M.color}`,children:M.label})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:"Сумма:"})]}),(0,a.jsxs)("span",{className:"text-lg font-bold text-primary",children:[g.total_amount.toLocaleString("ru-RU")," ₽"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:"Создан:"})]}),a.jsx("span",{className:"text-sm text-muted-foreground",children:(0,N.Q)(new Date(g.created_at),{addSuffix:!0,locale:w.ru})})]})]})]})]}),!Z&&"paid"!==g.payment_status&&a.jsx(d,{orderId:s,amount:g.total_amount}),Z&&S&&(0,a.jsxs)(c.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[a.jsx(c.Ol,{className:"p-4 sm:p-6 pb-3",children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2 text-lg",children:[a.jsx(f,{className:"w-5 h-5 text-primary"}),"Информация о клиенте"]})}),(0,a.jsxs)(c.aY,{className:"p-4 sm:p-6 pt-0 space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Имя"}),a.jsx("p",{className:"font-medium text-sm",children:S.full_name||"Не указано"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-medium text-sm break-all",children:S.email})]}),S.phone&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Телефон"}),a.jsx("p",{className:"font-medium text-sm",children:S.phone})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"ID клиента"}),(0,a.jsxs)("p",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:[g.user_id.slice(0,8),"..."]})]})]})]}),g.order_items&&g.order_items.length>0&&(0,a.jsxs)(c.Zb,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:[a.jsx(c.Ol,{className:"p-4 sm:p-6 pb-3",children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2 text-lg",children:[a.jsx(h.Z,{className:"w-5 h-5 text-primary"}),"Состав заказа",a.jsx(o.C,{variant:"outline",className:"ml-auto",children:g.order_items.length})]})}),a.jsx(c.aY,{className:"p-4 sm:p-6 pt-0",children:a.jsx("div",{className:"space-y-2 sm:space-y-3",children:g.order_items.map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:e.services?.title||"Услуга"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Кол-во: ",e.quantity," \xd7"," ",e.services?.price?.toLocaleString("ru-RU")||0," ","₽"]})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold whitespace-nowrap ml-3",children:[((e.services?.price||0)*e.quantity).toLocaleString("ru-RU")," ","₽"]})]},e.id))})})]})]}),a.jsx("div",{className:"lg:col-span-2",children:(0,a.jsxs)(c.Zb,{className:"h-[calc(100vh-180px)] border-border/50 flex flex-col",children:[(0,a.jsxs)(c.Ol,{className:"border-b p-4 sm:p-6",children:[(0,a.jsxs)(c.ll,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[a.jsx(y.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),Z?"Чат с клиентом":"Чат с администратором",a.jsx(o.C,{variant:"outline",className:"ml-auto text-xs",children:"В реальном времени"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Z?"Отвечайте на вопросы клиента и уточняйте детали заказа":"Задавайте вопросы администратору о вашем заказе"})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(n,{orderId:s,currentUser:i,orderStatus:g.status,paymentStatus:g.payment_status})})]})})]})}),a.jsx("div",{className:"border-t border-border/40 mt-12 py-6",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx(u.Z,{className:"w-4 h-4 text-primary"})}),a.jsx("span",{className:"text-sm font-medium",children:"Lonely PRICE"})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center sm:text-right",children:["\xa9 ",new Date().getFullYear()," Все права защищены"]})]})})})]})}},74888:(e,s,t)=>{"use strict";t.d(s,{z:()=>a});let a=(0,t(68570).createProxy)(String.raw`/home/ensi/Projects/lonlyprice/components/mobile-nav.tsx#MobileNav`)},18897:(e,s,t)=>{"use strict";t.d(s,{C:()=>d});var a=t(19510);t(71159);var r=t(43025),l=t(46145),i=t(50650);let n=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,asChild:t=!1,...l}){let d=t?r.g7:"span";return a.jsx(d,{"data-slot":"badge",className:(0,i.cn)(n({variant:s}),e),...l})}},2946:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var a=t(19510);t(71159);var r=t(43025),l=t(46145),i=t(50650);let n=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:s,size:t,asChild:l=!1,...d}){let c=l?r.g7:"button";return a.jsx(c,{"data-slot":"button",className:(0,i.cn)(n({variant:s,size:t,className:e})),...d})}},46697:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>l,aY:()=>c,eW:()=>o,ll:()=>n});var a=t(19510);t(71159);var r=t(50650);function l({className:e,...s}){return a.jsx("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return a.jsx("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function n({className:e,...s}){return a.jsx("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return a.jsx("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}function c({className:e,...s}){return a.jsx("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}function o({className:e,...s}){return a.jsx("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}},19692:(e,s,t)=>{"use strict";t.d(s,{e:()=>l});var a=t(24746),r=t(71615);async function l(){let e=await (0,r.cookies)(),s="https://lvjmvxhppvssyhryjaal.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2am12eGhwcHZzc3locnlqYWFsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MDE2MzQsImV4cCI6MjA4MTI3NzYzNH0.xpHw8-n5DI1w0EZQz415rMn_Ejdr2GWxMzaz7ySIvB0";if(!s||!t)throw Error("Missing Supabase environment variables. Please create .env.local file with NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");return(0,a.createServerClient)(s,t,{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:a})=>e.set(s,t,a))}catch{}}}})}},50650:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(55761),r=t(62386);function l(...e){return(0,r.m6)((0,a.W)(e))}},11242:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(27162).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},72298:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(27162).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},67245:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(27162).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},31958:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(27162).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,959,438,404,684,470,590,877,154,91,604],()=>t(30202));module.exports=a})();